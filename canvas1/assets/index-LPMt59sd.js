/* Last build: 5:0:2024  20.34.1*/
function y(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(e){if(e.ep)return;e.ep=!0;const i=n(e);fetch(e.href,i)}})();const u=[{id:"opacity",min:0,max:100,value:100,label:"Непрозрачность",units:"%"},{id:"brightness",min:0,max:300,value:100,label:"Яркость",units:"%"},{id:"contrast",min:0,max:300,value:100,label:"Контрастность",units:"%"},{id:"saturate",min:0,max:300,value:100,label:"Насыщенность",units:"%"},{id:"hue-rotate",min:-180,max:180,value:0,label:"Вращение оттенка",units:"Deg"},{id:"sepia",min:0,max:100,value:0,label:"Сепия",units:"%"},{id:"blur",min:0,max:10,value:0,label:"Размытие",units:"px"},{id:"invert",min:0,max:100,value:0,label:"Инверсия",units:"%"},{id:"grayscale",min:0,max:100,value:0,label:"Оттенки серого",units:"%"}],g=document.querySelector(".filters"),s={};u.forEach(a=>{const t=document.createElement("div");t.setAttribute("class","cell");const n=document.createElement("label");n.setAttribute("class","label"),n.setAttribute("for",a.id),n.textContent=a.label,t.appendChild(n);const r=document.createElement("input");r.setAttribute("type","range"),r.setAttribute("id",a.id),r.setAttribute("min",a.min),r.setAttribute("max",a.max),r.setAttribute("value",a.value),t.appendChild(r);const e=document.createElement("span");e.innerHTML='<span id="'.concat(a.id,'-text">').concat(a.value,"</span><span>").concat(a.units,"</span>"),t.appendChild(e),g.appendChild(t)});let d=null;const h=(a,t)=>{d||(d=setTimeout(()=>{const n=document.getElementById("canvas");if(n){const r=n.getContext("2d"),e=+a.value,i=a.id,o=document.querySelector("#".concat(i,"-text"));o.textContent=e;const c=u.find(l=>l.id===i);s[i]="".concat(e).concat(c.units),r.filter=Object.entries(s).map(([l,f])=>"".concat(l,"(").concat(f,")")).join(" "),r.clearRect(0,0,n.width,n.height),r.drawImage(t,0,0)}d=null},100))},p=a=>{const t=document.getElementById("canvas");if(t){const n=t.getContext("2d");n.filter="none",Object.keys(s).forEach(e=>{delete s[e]}),n.clearRect(0,0,t.width,t.height),n.drawImage(a,0,0),u.forEach(e=>{const i=document.querySelector("#".concat(e.id)),o=document.querySelector("#".concat(e.id,"-text"));i.value=e.value,o.textContent=e.value})}},v=document.querySelector("#file-input"),b=document.querySelector("#container");let m;v.addEventListener("change",a=>{const t=a.target;if(!t.files||t.files.length===0){alert("Надо бы выбрать файл.");return}const n=t.files[0];if(!n.type.startsWith("image/")){alert("Я работаю только с изображениями");return}const r=new FileReader;r.onload=e=>{const i=new Image;i.onload=function(){const o={width:i.width,height:i.height};console.log("Image size: ".concat(o.width," x ").concat(o.height));let c=document.getElementById("canvas");c&&c.remove(),c=document.createElement("canvas"),c.setAttribute("id","canvas"),c.setAttribute("width",o.width),c.setAttribute("height",o.height),c.style.border="1px solid #f00",b.appendChild(c);const l=c.getContext("2d");l.clearRect(0,0,o.width,o.height),l.drawImage(i,0,0,o.width,o.height),m=i},i.src=e.target.result},r.readAsDataURL(n)});document.querySelector("#reset-btn").addEventListener("click",()=>{p(m)});document.querySelector(".filters").addEventListener("input",a=>{const t=a.target;t.getAttribute("type")==="range"&&h(t,m)});document.querySelector("#download-btn").addEventListener("click",()=>{const a=document.getElementById("canvas");if(a){a.getContext("2d");const t=a.toDataURL("image/png"),n=document.createElement("a");n.href=t,n.download="canvas_image.png",document.body.appendChild(n),n.click(),document.body.removeChild(n)}});export{y as __vite_legacy_guard};
