/* Last build: 5:0:2024  20.34.1*/
System.register([],(function(e,t){"use strict";return{execute:function(){var e=document.createElement("style");e.textContent='@import"https://fonts.googleapis.com/css2?family=Square+Peg&display=swap";@font-face{font-family:Tapestry;src:local("Tapestry"),url(/assets/fonts/Tapestry-Regular-Pp0hbwAq.ttf) format("truetype")}body{margin:0;padding:0;background-image:url(/assets/images/background-kUrOLMMk.jpg)}.page-header{text-align:center;font-family:Square Peg,cursive;font-size:50px}.image-block{display:flex;align-items:center;justify-content:center}*{padding:0;margin:0;box-sizing:border-box}.all-links{display:flex;align-items:center;justify-content:center;padding:20px;user-select:none}.all-links a{padding:20px;margin:20px;background-color:#ddd;border-color:#00f;border-radius:10px;min-width:200px;text-align:center;text-decoration:none;color:#000;font-weight:700;font-size:30px;font-family:Arial,Helvetica,sans-serif}.all-links a:hover{font-style:italic}#file-input{width:1px;height:1px;opacity:0;position:absolute}#container{display:flex;align-items:center;justify-content:center}.buttons{margin:10px;display:flex;align-items:center;flex-wrap:wrap;justify-content:center}.cell{border:1px solid #ccc;border-radius:4px;background-color:#fff;padding:5px;margin:0 5px;min-height:35px;font-family:Arial,Helvetica,sans-serif;font-size:16px;display:flex;flex-direction:column;align-items:center}.input-label{cursor:pointer;margin-right:5px;font-family:Arial,Helvetica,sans-serif;font-size:16px}button{cursor:pointer;font-family:Arial,Helvetica,sans-serif;font-size:16px;background-color:#fff;border-color:transparent}.label{margin-right:5px}\n',document.head.appendChild(e);const t=[{id:"opacity",min:0,max:100,value:100,label:"Непрозрачность",units:"%"},{id:"brightness",min:0,max:300,value:100,label:"Яркость",units:"%"},{id:"contrast",min:0,max:300,value:100,label:"Контрастность",units:"%"},{id:"saturate",min:0,max:300,value:100,label:"Насыщенность",units:"%"},{id:"hue-rotate",min:-180,max:180,value:0,label:"Вращение оттенка",units:"Deg"},{id:"sepia",min:0,max:100,value:0,label:"Сепия",units:"%"},{id:"blur",min:0,max:10,value:0,label:"Размытие",units:"px"},{id:"invert",min:0,max:100,value:0,label:"Инверсия",units:"%"},{id:"grayscale",min:0,max:100,value:0,label:"Оттенки серого",units:"%"}],n=document.querySelector(".filters"),i={};t.forEach((e=>{const t=document.createElement("div");t.setAttribute("class","cell");const i=document.createElement("label");i.setAttribute("class","label"),i.setAttribute("for",e.id),i.textContent=e.label,t.appendChild(i);const a=document.createElement("input");a.setAttribute("type","range"),a.setAttribute("id",e.id),a.setAttribute("min",e.min),a.setAttribute("max",e.max),a.setAttribute("value",e.value),t.appendChild(a);const l=document.createElement("span");l.innerHTML=`<span id="${e.id}-text">${e.value}</span><span>${e.units}</span>`,t.appendChild(l),n.appendChild(t)}));let a=null;const l=document.querySelector("#file-input"),r=document.querySelector("#container");let o;l.addEventListener("change",(e=>{const t=e.target;if(!t.files||0===t.files.length)return void alert("Надо бы выбрать файл.");const n=t.files[0];if(!n.type.startsWith("image/"))return void alert("Я работаю только с изображениями");const i=new FileReader;i.onload=e=>{const t=new Image;t.onload=function(){const e={width:t.width,height:t.height};console.log(`Image size: ${e.width} x ${e.height}`);let n=document.getElementById("canvas");n&&n.remove(),n=document.createElement("canvas"),n.setAttribute("id","canvas"),n.setAttribute("width",e.width),n.setAttribute("height",e.height),n.style.border="1px solid #f00",r.appendChild(n);const i=n.getContext("2d");i.clearRect(0,0,e.width,e.height),i.drawImage(t,0,0,e.width,e.height),o=t},t.src=e.target.result},i.readAsDataURL(n)})),document.querySelector("#reset-btn").addEventListener("click",(()=>{(e=>{const n=document.getElementById("canvas");if(n){const a=n.getContext("2d");a.filter="none",Object.keys(i).forEach((e=>{delete i[e]})),a.clearRect(0,0,n.width,n.height),a.drawImage(e,0,0),t.forEach((e=>{const t=document.querySelector(`#${e.id}`),n=document.querySelector(`#${e.id}-text`);t.value=e.value,n.textContent=e.value}))}})(o)})),document.querySelector(".filters").addEventListener("input",(e=>{const n=e.target;"range"===n.getAttribute("type")&&((e,n)=>{a||(a=setTimeout((()=>{const l=document.getElementById("canvas");if(l){const a=l.getContext("2d"),r=+e.value,o=e.id;document.querySelector(`#${o}-text`).textContent=r;const s=t.find((e=>e.id===o));i[o]=`${r}${s.units}`,a.filter=Object.entries(i).map((([e,t])=>`${e}(${t})`)).join(" "),a.clearRect(0,0,l.width,l.height),a.drawImage(n,0,0)}a=null}),100))})(n,o)})),document.querySelector("#download-btn").addEventListener("click",(()=>{const e=document.getElementById("canvas");if(e){e.getContext("2d");const t=e.toDataURL("image/png"),n=document.createElement("a");n.href=t,n.download="canvas_image.png",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}))}}}));
